/**
 * Starry night styles.
 */
@mixin styles {
    /*
     * Rehype plugin {@see https://o5p.me/fSI3OT}.
     * `.highlight*` classes are generated by plugin.
     */

    // Code block container.
    .highlight {
        overflow: hidden;
        line-height: 1em;
        background: rgb(var(--colors-color-starry-night));
        border: 1px solid rgb(var(--colors-color-starry-night-border));
        border-radius: 0.375rem;
    }

    // Header inside code block container.
    .highlight-header {
        display: flex;
        gap: 0.5em;
        align-items: center;
        padding: 0.5em;
        color: rgb(var(--colors-color-starry-night-header-fg));
        background: rgb(var(--colors-color-starry-night-header));
        border-block-end: 1px solid rgb(var(--colors-color-starry-night-border));
        border-radius: 0.375rem 0.375rem 0 0;
    }

    // Language inside code block header.
    .highlight-language {
        padding: 0.25em 0.5em 0.15em;
        font-family: ui-monospace, monospace;
        font-size: 0.75em;
        color: rgb(var(--colors-color-starry-night-header-language-fg));
        text-transform: uppercase;
        background: rgb(var(--colors-color-starry-night-header-language));
        border-radius: 0.1875rem;
    }

    // Copy button inside code block header.
    .highlight-copy {
        &::before {
            display: inline-block;
            width: 1em;
            height: 1em;
            margin: 0 0.5em 0 0;
            line-height: 1em;
            vertical-align: middle;
            content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-21 0 512 512'%3E%3Cpath fill='%23eceff1' d='M411 0H165c-32 0-58 26-58 59v288c0 32 26 58 58 58h246c32 0 58-26 58-58V59c0-33-26-59-58-59zm0 0'/%3E%3Cpath fill='%2390a4ae' d='M368 288H208a16 16 0 0 1 0-32h160a16 16 0 0 1 0 32zm0-64H208a16 16 0 0 1 0-32h160a16 16 0 0 1 0 32zm0-64H208a16 16 0 0 1 0-32h160a16 16 0 0 1 0 32zm0 0'/%3E%3Cpath fill='%232196f3' d='M165 437c-50 0-90-40-90-90V53H59C26 53 0 80 0 112v341c0 33 26 59 59 59h256c32 0 58-26 58-59v-16zm0 0'/%3E%3C/svg%3E");
        }

        &[data-copied] {
            &::before {
                content: '✔';
            }
        }
    }

    // Nested highlight styles.
    .highlight {
        // `<pre>` tag.
        > pre {
            padding: 0.8571em 0;
            margin: 0;
            background: none;
            border: 0;
            border-radius: 0;
            box-shadow: inset 0 0 2px 2px rgb(var(--colors-color-starry-night-box-shadows));

            // `<code>` tag.
            > code {
                display: grid;
                color: rgb(var(--colors-color-starry-night-fg));
            }
        }

        // Lines of code.
        .line {
            padding-inline: 1.1428em;

            // Focused and/or hovered lines of code.
            &:hover,
            &:focus:not(:focus-visible) {
                background: rgb(var(--colors-color-starry-night-hilited-lines));
            }
        }

        // Lines of code line numbers.
        .line-number {
            margin-inline-end: 1em;
            color: rgb(var(--colors-color-starry-night-syntax-gutter-mark-fg));
            user-select: none;
        }

        // Highlighted lines of code.
        .line[data-highlighted] {
            background: rgb(var(--colors-color-starry-night-hilited-lines));
            border-inline-start: 2px solid rgb(var(--colors-color-starry-night-syntax-comment-fg));

            // Highlighted line numbers.
            .line-number {
                color: rgb(var(--colors-color-starry-night-syntax-comment-fg));
            }
        }

        // Lines with shell prompt icons.
        .line-prompt {
            &::before {
                display: inline-block;
                width: 1em;
                height: 1em;
                margin-inline: -0.175em 0.35em;
                vertical-align: middle;
                content: '';
                background: rgb(var(--colors-color-starry-night-syntax-comment-fg));

                // Define as a variable so that when autoprefixer runs it won’t end up duplicating this lengthy value.
                --mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M17.7247 20.25c-.1286 1.3979-1.2938 2.5-2.7247 2.5H5c-1.5166 0-2.75-1.2334-2.75-2.75V8c0-1.431 1.1021-2.5961 2.5-2.7247V16c0 2.3433 1.9062 4.25 4.25 4.25zM21.75 6.75V16c0 1.5166-1.2334 2.75-2.75 2.75H9c-1.5166 0-2.75-1.2334-2.75-2.75V4c0-1.5166 1.2334-2.75 2.75-2.75h7.25V6c0 .4141.3359.75.75.75zm-4 7.25c0-.4141-.3359-.75-.75-.75h-6c-.4141 0-.75.3359-.75.75s.3359.75.75.75h6c.4141 0 .75-.3359.75-.75zm0-4c0-.4141-.3359-.75-.75-.75h-6c-.4141 0-.75.3359-.75.75s.3359.75.75.75h6c.4141 0 .75-.3359.75-.75zm0-8.3105V5.25h3.5605z'/%3E%3C/svg%3E");

                mask-image: var(--mask-image);
                mask-repeat: no-repeat;
                mask-position: top center;
                mask-size: contain;
            }
        }
    }

    /*
     * Pretty lights syntax; {@see https://o5p.me/i6E6m1}.
     * `.pl*` syntax classes are generated by pretty lights.
     */

    // Bold.
    .pl-mb {
        font-weight: bold;
    }

    // Italic.
    .pl-mi {
        font-style: italic;
    }

    // Comments.
    .pl-c {
        color: rgb(var(--colors-color-starry-night-syntax-comment-fg));
    }

    // Gutter marks; e.g., line numbers.
    .pl-sg {
        color: rgb(var(--colors-color-starry-night-syntax-gutter-mark-fg));
    }

    // Punctuation.
    .pl-pds,
    .pl-ms,
    .pl-ml {
        color: rgb(var(--colors-color-starry-night-syntax-punctuation-fg));
    }

    // Keywords.
    .pl-k {
        color: rgb(var(--colors-color-starry-night-syntax-keyword-fg));
    }

    // Variables.
    .pl-v,
    .pl-smw {
        color: rgb(var(--colors-color-starry-night-syntax-variable-fg));
    }

    // Constants.
    .pl-c1,
    .pl-s .pl-v {
        color: rgb(var(--colors-color-starry-night-syntax-constant-fg));
    }

    // Modifiers.
    .pl-smi,
    .pl-s .pl-s1 {
        color: rgb(var(--colors-color-starry-night-syntax-modifier-fg));
    }

    // Entities.
    .pl-e,
    .pl-en {
        color: rgb(var(--colors-color-starry-night-syntax-entity-fg));
    }

    // Entity tags.
    .pl-ent {
        color: rgb(var(--colors-color-starry-night-syntax-entity-tag-fg));
    }

    // Other; e.g., markdown links.
    .pl-corl {
        color: rgb(var(--colors-color-starry-night-syntax-other-link-fg));
        text-decoration: underline;
    }

    // Various strings.
    .pl-s,
    .pl-s .pl-pse .pl-s1,
    .pl-sr,
    .pl-sr .pl-cce,
    .pl-sr .pl-sre,
    .pl-sr .pl-sra {
        color: rgb(var(--colors-color-starry-night-syntax-string-fg));
    }

    // Regular expressions.
    .pl-sr .pl-cce {
        font-weight: bold;
        color: rgb(var(--colors-color-starry-night-syntax-regexp-fg));
    }

    // Markdown headers.
    .pl-mh,
    .pl-mh .pl-en {
        font-weight: bold;
        color: rgb(var(--colors-color-starry-night-syntax-entity-tag-fg));
    }

    // Range notation in a diff/patch.
    .pl-mdr {
        font-weight: bold;
        color: rgb(var(--colors-color-dazzle));
    }

    // New added lines in a diff/patch.
    .pl-mi1 {
        color: rgb(var(--colors-color-success-fg));
        background: rgb(var(--colors-color-success));
    }

    // Old removed lines in a diff/patch.
    .pl-md {
        color: rgb(var(--colors-color-danger-fg));
        background: rgb(var(--colors-color-danger));
    }

    // Changed lines in a diff/patch.
    .pl-mc {
        color: rgb(var(--colors-color-warning-fg));
        background: rgb(var(--colors-color-warning));
    }

    // Ignored lines in a diff/patch.
    .pl-mi2 {
        color: rgb(var(--colors-color-neutral-fg));
        background: rgb(var(--colors-color-neutral));
    }

    // Illegal, broken, or unrecognized syntax.
    .pl-ii {
        color: rgb(var(--colors-color-danger-fg));
        background: rgb(var(--colors-color-danger));
    }

    // Untested. Some kind of brackets.
    .pl-ba,
    .pl-bu {
        color: rgb(var(--colors-color-dazzle));
    }

    // Untested. Possibly whitespace.
    .pl-c2 {
        color: rgb(var(--colors-color-dark-fg));
        background: rgb(var(--colors-color-dark));
    }
}
